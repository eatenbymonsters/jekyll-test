var UltimaSynth=function(e){function t(e){y.frequency.value=e,f.frequency.value=e/m,p.gain.value=1,u(e)}function a(e){g(e),p.gain.value=0}function n(e){w.gain.value=e}function s(e){C.gain.value=e}function r(e){E.gain.value=e}function o(e){d=l(e),y.type=d}function c(e){h=l(e),f.type=h}function i(e,t){switch(console.log("the "+e+" control has been set to "+t),e){case"masterVolume":n(t);break;case"oscOneVolume":s(t);break;case"oscTwoVolume":r(t);break;case"oscOneWave":o(t);break;case"oscTwoWave":c(t);break;case"vcoTwoPitch":vcoTwoPitch(t)}}function l(e){var t=parseInt(e);switch(t){case 0:stringWaveValue="sine";break;case 1:stringWaveValue="square";break;case 2:stringWaveValue="sawtooth";break;case 3:stringWaveValue="triangle"}return stringWaveValue}function u(e){targetPitch=Math.floor(e),targetClass="pitchClass"+targetPitch,targetKey=document.getElementsByClassName(targetClass),noQuery.addClass(targetKey[0],"pressed")}function g(e){targetPitch=Math.floor(e),targetClass="pitchClass"+targetPitch,targetKey=document.getElementsByClassName(targetClass),noQuery.removeClass(targetKey[0],"pressed")}var v=new e,m=2,d="sine",h="square",y=v.createOscillator();y.type=d,y.frequency.value=440,y.start(0);var f=v.createOscillator();f.type=h,f.frequency.value=440,f.start(0);var p=v.createGain();p.gain.value=0;var C=v.createGain();C.gain.value=1;var E=v.createGain();E.gain.value=1;var w=v.createGain();w.gain.value=.1,y.connect(C),C.connect(p),f.connect(E),E.connect(p),p.connect(w),w.connect(v.destination);var b={controlChanged:i,noteStart:t,noteEnd:a};return b},UltimaSynthInputs=function(e,t){function a(){d=!0;var e=this.getAttribute("data-pitch");newSynth.noteStart(e)}function n(){if(d){var e=this.getAttribute("data-pitch");newSynth.noteStart(e)}}function s(){if(d){var e=this.getAttribute("data-pitch");newSynth.noteEnd(e)}}function r(){d=!1;var e=this.getAttribute("data-pitch");newSynth.noteEnd(e)}function o(){var e=this.value,t=this.getAttribute("data-controlName");newSynth.controlChanged(t,e)}for(var c=t.getElementsByClassName("synthKey"),i=e.getElementsByClassName("masterVolume"),l=e.getElementsByClassName("oscOneVolume"),u=e.getElementsByClassName("oscTwoVolume"),g=e.getElementsByClassName("oscOneWave"),v=e.getElementsByClassName("oscTwoWave"),m=e.getElementsByClassName("oscTwoPitch"),d=!1,h=document.getElementById("testOutput"),y=(h.getElementsByClassName("noteDisplay"),h.getElementsByClassName("volumeDisplay"),0);y<c.length;y++)c[y].addEventListener("mousedown",a,!1),c[y].addEventListener("mouseover",n,!1),c[y].addEventListener("mouseout",s,!1),c[y].addEventListener("mouseup",r,!1);i[0].addEventListener("change",o,!1),l[0].addEventListener("change",o,!1),u[0].addEventListener("change",o,!1),g[0].addEventListener("change",o,!1),v[0].addEventListener("change",o,!1),m[0].addEventListener("change",o,!1)},noQuery=function(){function e(e,t){if(e.classList)var a=e.classList.contains(t);else var a=new RegExp("(^| )"+t+"( |$)","gi").test(e.className);return a}function t(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}var n={hasClass:e,addClass:t,removeClass:a};return n}(),controlsWrapper=document.getElementById("synthControls"),keysWrapper=document.getElementById("synthKeys"),contextClass=window.AudioContext||window.webkitAudioContext;if(contextClass)var newSynth=UltimaSynth(contextClass),newSynthInputs=UltimaSynthInputs(controlsWrapper,keysWrapper);