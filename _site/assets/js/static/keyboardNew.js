var UltimaSynth=function(e){function t(e){f.frequency.value=e,C.frequency.value=e/y,p.gain.value=1,d(e)}function a(e){v(e),p.gain.value=0}function n(e){k.gain.value=e}function s(e){w.gain.value=e}function o(e){E.gain.value=e}function r(e){m=u(e),f.type=m}function c(e){h=u(e),C.type=h}function i(e){y=e}function l(e,t){switch(e){case"masterVolume":n(t);break;case"oscOneVolume":s(t);break;case"oscTwoVolume":o(t);break;case"oscOneWave":r(t);break;case"oscTwoWave":c(t);break;case"oscTwoPitch":i(t)}}function u(e){var t=parseInt(e);switch(t){case 0:stringWaveValue="sine";break;case 1:stringWaveValue="square";break;case 2:stringWaveValue="sawtooth";break;case 3:stringWaveValue="triangle"}return stringWaveValue}function d(e){targetPitch=Math.floor(e),targetClass="pitchClass"+targetPitch,targetKey=document.getElementsByClassName(targetClass),noQuery.addClass(targetKey[0],"pressed")}function v(e){targetPitch=Math.floor(e),targetClass="pitchClass"+targetPitch,targetKey=document.getElementsByClassName(targetClass),noQuery.removeClass(targetKey[0],"pressed")}var g=new e,y=2,m="sine",h="square",f=g.createOscillator();f.type=m,f.frequency.value=440,f.start(0);var C=g.createOscillator();C.type=h,C.frequency.value=440,C.start(0);var p=g.createGain();p.gain.value=0;var w=g.createGain();w.gain.value=1;var E=g.createGain();E.gain.value=1;var k=g.createGain();k.gain.value=.1,f.connect(w),w.connect(p),C.connect(E),E.connect(p),p.connect(k),k.connect(g.destination);var b={controlChanged:l,noteStart:t,noteEnd:a};return b},UltimaSynthInputs=function(e,t){function a(){h=!0;var e=this.getAttribute("data-pitch");newSynth.noteStart(e)}function n(){if(h){var e=this.getAttribute("data-pitch");newSynth.noteStart(e)}}function s(){if(h){var e=this.getAttribute("data-pitch");newSynth.noteEnd(e)}}function o(){h=!1;var e=this.getAttribute("data-pitch");newSynth.noteEnd(e)}function r(){var e=this.value,t=this.getAttribute("data-controlName");newSynth.controlChanged(t,e),newControlSliderDisplay.sliderChange(t,e)}function c(e){return e.keyCode in f?void e.preventDefault():(f[e.keyCode]=!0,void("undefined"!=typeof C[e.keyCode]&&(e.preventDefault(),noteValue=C[e.keyCode],newSynth.noteStart(noteValue))))}function i(e){delete f[e.keyCode],"undefined"!=typeof C[e.keyCode]&&(e.preventDefault(),noteValue=C[e.keyCode],newSynth.noteEnd(noteValue))}for(var l=t.getElementsByClassName("synthKey"),u=e.getElementsByClassName("masterVolume"),d=e.getElementsByClassName("oscOneVolume"),v=e.getElementsByClassName("oscTwoVolume"),g=e.getElementsByClassName("oscOneWave"),y=e.getElementsByClassName("oscTwoWave"),m=e.getElementsByClassName("oscTwoPitch"),h=!1,f=[],C={65:"261.63",87:"277.18",83:"293.66",69:"311.13",68:"329.63",70:"349.23",84:"369.99",71:"392.00",89:"415.30",72:"440.00",85:"466.16",74:"493.88",75:"523.25",79:"554.37",76:"587.33",80:"622.25",59:"659.26",186:"698.46",222:"739.99",221:"783.99",220:"830.61"},p=0;p<l.length;p++)l[p].addEventListener("mousedown",a,!1),l[p].addEventListener("mouseover",n,!1),l[p].addEventListener("mouseout",s,!1),l[p].addEventListener("mouseup",o,!1);document.addEventListener("keydown",c,!1),document.addEventListener("keyup",i,!1),u[0].addEventListener("change",r,!1),d[0].addEventListener("change",r,!1),v[0].addEventListener("change",r,!1),g[0].addEventListener("change",r,!1),y[0].addEventListener("change",r,!1),m[0].addEventListener("change",r,!1)},noQuery=function(){function e(e,t){if(e.classList)var a=e.classList.contains(t);else var a=new RegExp("(^| )"+t+"( |$)","gi").test(e.className);return a}function t(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}var n={hasClass:e,addClass:t,removeClass:a};return n}(),controlSliderDisplay=function(){function e(e,a){var n,s="controlLabel_"+e,o=document.getElementsByClassName(s);switch(e){case"masterVolume":n=10*a;break;case"oscOneVolume":n=10*a;break;case"oscTwoVolume":n=10*a;break;case"oscOneWave":n=t(a);break;case"oscTwoWave":n=t(a);break;case"oscTwoPitch":n=0-a,console.log()}o[0].textContent=n}function t(e){var t=parseInt(e);switch(t){case 0:stringWaveValue="sine";break;case 1:stringWaveValue="square";break;case 2:stringWaveValue="sawtooth";break;case 3:stringWaveValue="triangle"}return stringWaveValue}var a={sliderChange:e};return a},controlsWrapper=document.getElementById("synthControls"),keysWrapper=document.getElementById("synthKeys"),contextClass=window.AudioContext||window.webkitAudioContext;if(contextClass)var newSynth=UltimaSynth(contextClass),newSynthInputs=UltimaSynthInputs(controlsWrapper,keysWrapper),newControlSliderDisplay=controlSliderDisplay();