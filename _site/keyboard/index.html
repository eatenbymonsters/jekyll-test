<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>

  <meta charset="utf-8">
  <title>
     CSS and Javascript Keyboard – Tom Hazledine Web Design
  </title>
  <meta name="description" content="A working piano keyboard built using the Web Audio API and styled with CSS.">
  <meta name="viewport" content="width=device-width">
  <link rel="shortcut icon" href="http://thomashazledine.com/img/build/favicon.ico">
  <link rel="alternate" type="application/rss+xml" title="Tom Hazledine" href="http://thomashazledine.com/feed.xml">

  
    <link rel="stylesheet" href="http://thomashazledine.com/keyboard.css">
  

  <!-- Modernizr -->
  <script src="/js/vendor/modernizr-2.6.2.min.js"></script>

  <!-- Polyfills: Media Queries support for older versions of IE etc., HTML5 shiv -->
  <!--[if lt IE 9]>
    <script src="/js/vendor/respond.min.js" type="text/javascript"></script>
    <script src="/js/vendor/html5.js" type="text/javascript"></script>
  <![endif]-->

  <!-- TYPEKIT: ‘TH Portfolio’ -->
	<script type="text/javascript" src="//use.typekit.net/puc4nqb.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

</head>

<body id="top">

  <header class="header clearfix">
    <h2 class="siteName"><a href="/" title="Tom Hazledine homepage" rel="home">Tom Hazledine</a></h2>
    <span class="tagline">Building things for the web</span>
    <nav class="topNav" role="navigation">
      <button class="menuTitle">Menu</button>
      <ul class="clearfix">
        
        
          <li >
            <a href="/">About</a>
          </li>
        
          <li >
            <a href="/portfolio/">Portfolio</a>
          </li>
        
          <li >
            <a href="/blog/">Blog</a>
          </li>
        
      </ul>
    </nav>
  </header><!-- .header -->


    <article class="keyboard clearfix">

  <h1>CSS & Javascript Keyboard</h1>

  <div class="controls">
    <div class="controlStrip">
      <span>Master Volume</span>
      <input type="range" min="0" max="1" value="0.5" step="0.1" onchange="masterVolume(this.value)">
    </div>
    <div class="controlStrip">
      <span>Osc. #1 Volume</span>
      <input type="range" min="0" max="1" value="1" step="0.1" onchange="oscOneVolume(this.value)">
    </div>
    <div class="controlStrip">
      <span>Osc. #2 Volume</span>
      <input type="range" min="0" max="1" value="1" step="0.1" onchange="oscTwoVolume(this.value)">
    </div>
    <div class="controlStrip">
      <span>Osc. #1: Wave</span>
      <input type="range" min="0" max="3" value="0" step="1" onchange="oscOneWave(this.value)">
    </div>
    <div class="controlStrip">
      <span>Osc. #2: Wave</span>
      <input type="range" min="0" max="3" value="1" step="1" onchange="oscTwoWave(this.value)">
    </div>
    <div class="controlStrip">
      <span>Oscillator #2: Pitch</span>
      <input type="range" min="1" max="5" value="2" step="0.1" onchange="vcoTwoPitch(this.value)">
    </div>
  </div>

  <div class="pianoWrapper">
    <div class="piano">
      <div class="octave-wrapper clearfix">
        <ol class="octave clearfix">
          <li class="piano-key natural"    data-pitch="261.63" data-note="C"  data-octave="4" ></li>
          <li class="piano-key accidental" data-pitch="277.18" data-note="C#" data-octave="4" ></li>
          <li class="piano-key natural"    data-pitch="293.66" data-note="D"  data-octave="4" ></li>
          <li class="piano-key accidental" data-pitch="311.13" data-note="D#" data-octave="4" ></li>
          <li class="piano-key natural"    data-pitch="329.63" data-note="E"  data-octave="4" ></li>
          <li class="piano-key natural"    data-pitch="349.23" data-note="F"  data-octave="4" ></li>
          <li class="piano-key accidental" data-pitch="369.99" data-note="F#" data-octave="4" ></li>
          <li class="piano-key natural"    data-pitch="392.00" data-note="G"  data-octave="4" ></li>
          <li class="piano-key accidental" data-pitch="415.30" data-note="G#" data-octave="4" ></li>
          <li class="piano-key natural"    data-pitch="440.00" data-note="A"  data-octave="4" ></li>
          <li class="piano-key accidental" data-pitch="466.16" data-note="A#" data-octave="4" ></li>
          <li class="piano-key natural"    data-pitch="493.88" data-note="B"  data-octave="4" ></li>

          <li class="piano-key natural"    data-pitch="523.25" data-note="C"  data-octave="5" ></li>
          <li class="piano-key accidental" data-pitch="554.37" data-note="C#" data-octave="5" ></li>
          <li class="piano-key natural"    data-pitch="587.33" data-note="D"  data-octave="5" ></li>
          <li class="piano-key accidental" data-pitch="622.25" data-note="D#" data-octave="5" ></li>
          <li class="piano-key natural"    data-pitch="659.26" data-note="E"  data-octave="5" ></li>
          <li class="piano-key natural"    data-pitch="698.46" data-note="F"  data-octave="5" ></li>
          <li class="piano-key accidental" data-pitch="739.99" data-note="F#" data-octave="5" ></li>
          <li class="piano-key natural"    data-pitch="783.99" data-note="G"  data-octave="5" ></li>
          <li class="piano-key accidental" data-pitch="830.61" data-note="G#" data-octave="5" ></li>
          <li class="piano-key natural"    data-pitch="880.00" data-note="A"  data-octave="5" ></li>
          <li class="piano-key accidental" data-pitch="932.33" data-note="A#" data-octave="5" ></li>
          <li class="piano-key natural"    data-pitch="987.77" data-note="B"  data-octave="5" ></li>
        </ol>
    </div>
    </div>
  </div>

  <section class="mainContentInner">
    <p>This is my first experiment with the Web Audio API. I'm currently using it to generate a single oscilator which is triggered by clicking on the keys. The key that's clicked then sets the pitch of the oscilator. This means that for now this keyboard is strictly monophonic. To get polyphony, I'll need to create an instance of the oscilator for each and every key. Not impossible, but I've not found the time to finish that part of it yet.</p>
    <p>One particular challenge that this iteration <bold>has</bold> solved is the behaviour of the keys themselves. Getting a realistic (ish) glissando effect took some delicate javascript coding. Both the sound itself and the visual change in the keys are triggered (as one would expect) using the same event; the ocsilator function is called along with a toggling of the keys' “pressed” class. But getting that event to start and end as expected was rather tricky. It needs be aware of both the mouse up/down click state <em>and</em> the roll-on/roll-off positioning of the cursor, too.</p>
    <p>For the time being this is just a quirky experiement, but if I can sort out keybindings, add polyphony, and provide an adjustable envelope filter, then it would be a bona-fide synth and could possibly be of some use...</p>
  </section>

  <nav class="nav-outer clearfix">
    
      <a href="/ecdawson" class="nav-button-prev">E.C. Dawson & Company</a>
    

    
      <a href="/fairgrieve-and-horner" class="nav-button-next">Fairgrieve & Horner records</a>
    
  </nav>

</article>


<section class="socialLinks clearfix">
  <span class="socialContainer"><a href="https://twitter.com/thomashazledine" class="twitter">Follow me on Twitter</a></span>
  <span class="socialContainer"><a href="https://github.com/tomhazledine" class="github">Fork me on GitHub</a></span>
</section>

<footer class="footer">
	<a href="mailto:me@thomashazledine.com">Let's get to work&hellip;</a>

	  <!-- OLD FOOTER CONTENT:
		div class="footer-inner">

	    <h3>Sign up to my mailing list to get my writing hot-off-the-press and straight into your inbox.</h3>


      <div id="mc_embed_signup">
        <form action="http://eatenbymonsters.us2.list-manage.com/subscribe/post?u=1a730ad6957b6c1ecca3b4bd6&amp;id=a031bfda21" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>

          <div class="mc-field-group">
          	<label for="mce-EMAIL">Email Address:</label>
          	<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
          </div>
          <div class="mc-field-group">
          	<label for="mce-FNAME">First Name:</label>
          	<input type="text" value="" name="FNAME" class="" id="mce-FNAME">
          </div>
          <div class="mc-field-group">
          	<label for="mce-LNAME">Last Name:</label>
          	<input type="text" value="" name="LNAME" class="" id="mce-LNAME">
          </div>
          <div id="mce-responses" class="clear">
          	<div class="response" id="mce-error-response" style="display:none"></div>
          	<div class="response" id="mce-success-response" style="display:none"></div>
          </div>	<div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
        </form>
      </div>


	    <div class="social clearfix">
	      <div class="github social-box">
	        <a href="https://github.com/eatenbymonsters" title="github">
	          <span class="icon">g</span>
	          <span class="icon-meta"><p>Fork me on Github</p></span>
	        </a>
	      </div>
      	<div class="twitter social-box">
  	      <a href="https://twitter.com/eatenbymonsters" title="twitter">
      	    <span class="icon">t</span>
      	    <span class="icon-meta"><p>Follow me on Twitter</p></span>
      	  </a>
      	</div>
        <div class="rss social-box">
	        <a href="/feed.xml" title="feed">
	          <span class="icon">r</span>
	          <span class="icon-meta"><p>Subscribe to my RSS feed</p></span>
	        </a>
        </div>
	    </div>
	    <p>I do <a href="/projects">many things</a>.</p>


	  </div-->

	<div class="scripts">
  <!-- Javascript, starting with jQuery -->
  <script src='/js/vendor/jquery-1.9.1.min.js'></script>
  <script src="/js/script.js"></script>
  
    <script src="http://thomashazledine.com/js/keyboard.js"></script>
  

  <!-- Analytics -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36655973-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</div><!-- .scripts -->

</body>
</html>

</footer>

